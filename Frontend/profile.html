<!DOCTYPE html>
<html lang="vi">
<head>
	<meta charset="UTF-8" />
	<meta name="viewport" content="width=device-width, initial-scale=1.0" />
	<title>E-Shop | Tài khoản</title>
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link href="/Frontend/assets/css/styles.css" rel="stylesheet">
</head>
<body>
	<div id="navbar"></div>
	<div class="container">
		<h3 class="mb-3">Tài khoản</h3>
		<div id="info" class="mb-2"></div>
		<button id="btnOrders" class="btn btn-outline-primary btn-sm">Đơn hàng của tôi</button>
		<div id="orders" class="mt-3"></div>
	</div>

	<script>window.USE_HTTP = true;</script>
	<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
	<script type="module">
		async function loadPartial(id, url){ const html = await (await fetch(url)).text(); document.getElementById(id).innerHTML = html; }
		await loadPartial('navbar','/Frontend/partials/navbar.html');
		import { OrderAPI, getUserInfo, getUserRole } from '/Frontend/assets/js/api.js';
		const info = getUserInfo();
		document.getElementById('info').innerHTML = info ? `Email: <b>${info.email || ''}</b> | Role: <b>${getUserRole()||'User'}</b>` : 'Chưa đăng nhập';
		document.getElementById('btnOrders').onclick = async()=>{
			const items = await OrderAPI.my();
			document.getElementById('orders').innerHTML = items.map(o=>`<div class=\"card p-2 mb-2\">${o.id} - ${o.status} - ${o.totalAmount}</div>`).join('');
		}
	</script>
</body>
</html>

